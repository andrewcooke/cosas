
import std;
using namespace std;

#include "constants.h"
#include "source.h"
#include "oscillator.h"
#include "engine.h"


int main() {

  Manager manager;
  manager.set_root(262);
  Oscillator& o0 = manager.get_oscillator(0);
  Oscillator& o1 = manager.get_oscillator(1);
  o1.set_frequency(make_unique<RelativeFreq>(manager.get_root(), 0.5));
  MixedFM fm = MixedFM(o0, o1, unit_amp, wet_bal);

  for (int i = 0; i < 1000; i++) {
    cout << i << " " << fm.next(i, 0) << endl;
  }

}
